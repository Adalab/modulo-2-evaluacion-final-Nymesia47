const L=document.querySelector(".js-search-input"),j=document.querySelector(".js-search-btn"),S=document.querySelector(".js-reset-btn"),C=document.querySelector(".js-reset-favorite-btn"),l=document.querySelector(".js-result-list"),o=document.querySelector(".js-favorite-list");let f="",r=[],i=[];const A=localStorage.getItem("favoriteAnime");A&&(i=JSON.parse(A));for(const e of i)v(e,o);function I(){l.innerHTML="",fetch(`https://api.jikan.moe/v4/anime?q=${f}`).then(e=>e.json()).then(e=>{r=e.data;for(const c of r)g(c,l);d(".js-animeCard",p)})}function T(e){e.preventDefault(),f=L.value,I()}j.addEventListener("click",T);const d=(e,c)=>{const n=document.querySelectorAll(e);for(const t of n)t.addEventListener("click",c)},p=e=>{const c=Number(e.currentTarget.id),n=r.find(a=>a.mal_id===c),t=i.findIndex(a=>a.mal_id===c);t===-1?i.push(n):i.splice(t,1),localStorage.setItem("favoriteAnime",JSON.stringify(i)),o.innerHTML="";for(const a of i)v(a,o);l.innerHTML="";for(const a of r)g(a,l);d(".js-animeCard",p),d(".js-deleteFav-btn",h)};console.log(i);function v(e,c){const n=document.createElement("li");n.setAttribute("id",e.mal_id),n.classList.add("js-favAnimeCard"),n.classList.add("favorite-section-card"),c.appendChild(n);const t=document.createElement("article");t.classList.add("favCard");const a=document.createElement("button");a.textContent="X",a.classList.add("js-deleteFav-btn"),a.classList.add("favCard-delete"),a.setAttribute("data-id",e.mal_id),n.append(t,a);const s=document.createElement("img");e.images.jpg.image_url==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"?(s.setAttribute("src","https://placehold.co/60x86"),s.setAttribute("alt","placeholder image")):(s.setAttribute("src",e.images.jpg.image_url),s.setAttribute("alt",e.title));const m=document.createElement("h3"),u=document.createTextNode(e.title);m.appendChild(u),t.append(s,m)}function g(e,c){const n=document.createElement("li");n.setAttribute("id",e.mal_id),n.classList.add("js-animeCard"),c.appendChild(n);const t=document.createElement("article");i.find(b=>b.mal_id===e.mal_id)&&t.classList.add("favorite"),t.classList.add("card"),n.appendChild(t);const s=document.createElement("img");e.images.jpg.image_url==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"?(s.setAttribute("src","https://placehold.co/210x295"),s.setAttribute("alt","placeholder image")):(s.setAttribute("src",e.images.jpg.image_url),s.setAttribute("alt",e.title));const m=document.createElement("h3"),u=document.createTextNode(e.title);m.appendChild(u),t.append(s,m)}function h(e){const c=Number(e.currentTarget.getAttribute("data-id")),n=i.findIndex(t=>t.mal_id===c);i.splice(n,1),localStorage.removeItem("favoriteAnime"),localStorage.setItem("favoriteAnime",JSON.stringify(i)),o.innerHTML="";for(const t of i)v(t,o);d(".js-deleteFav-btn",h)}d(".js-deleteFav-btn",h);function E(){i=[],o.innerHTML="",localStorage.removeItem("favoriteAnime"),l.innerHTML="";for(const e of r)g(e,l);d(".js-animeCard",p)}C.addEventListener("click",E);function F(){L.value="",f="",r=[],i=[],l.innerHTML="",o.innerHTML="",localStorage.removeItem("favoriteAnime")}S.addEventListener("click",F);
//# sourceMappingURL=main.js.map
